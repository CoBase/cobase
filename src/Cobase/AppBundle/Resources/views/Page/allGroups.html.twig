{% extends 'CobaseAppBundle::layout.html.twig' %}

{% block content %}
<div class="row-fluid">
    <h2>Browse all groups</h2>

    {% for flashMessage in app.session.flashbag.get('group.created') %}
        <div class="alert alert-success fade in">
            {{ flashMessage }}
        </div>
    {% endfor %}
    
    <ul class="item-summary">
        {% for group in groups %}
            <li>
                <div class="overview">
                    <p class="main-detail">{{ group.created|date('M d') }}</p>
                    <p class="main-detail">{{ group.created|date('Y') }}</p>
                    <p class="sub-detail">at {{ group.created|date('H:i') }}</p>
                    {{ group.created|show_newflag|raw }}
                </div>
                <div class="info">
                    <p class="group-title">{{ group.title }}</p>
                    <p class="group-description">{{ group.description }}</p>
                    <p class="group-option-links">
                        <a class="btn btn-mini group-subscribe" href="{{ path('CobaseAppBundle_group_view', { 'groupId': group.shortUrl }) }}"><i class="icon-eye-open"></i> View {{ group.countPosts }} post(s)</a>
                        {% if is_granted('EDIT', group) or is_granted('ROLE_ADMIN') %}
                            <a class="btn btn-mini group-edit" href="{{ path('CobaseAppBundle_group_modify', { 'groupId': group.shortUrl }) }}"><i class="icon-edit"></i> Edit</a>
                            <a class="btn btn-mini group-delete" href="{{ path('CobaseAppBundle_group_delete') }}"><i class="icon-remove"></i> Delete</a>
                        {% endif %}
                    </p>
                </div>
                <div class="clearfix"></div>
            </li>
        {% else %}
            <p class="no-data">Currently there are no groups. Perhaps you could create a group?</p>
        {% endfor %}
    </ul>
</div>
{% endblock content %}





